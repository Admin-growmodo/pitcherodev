{"version":3,"file":"vsbl.js","sources":["../index.js"],"sourcesContent":["import srraf from 'srraf'\n\nexport default function vsbl (node, opts = {}) {\n  return function handlers (enter, exit) {\n    let visible = false\n\n    const threshold = parseFloat(node.getAttribute('data-threshold') || opts.threshold || 0)\n\n    return srraf((...args) => {\n      const [ { y, vh }, timestamp ] = args\n\n      const bounds = node.getBoundingClientRect()\n      const nodeTop = bounds.top + y\n      const nodeBot = nodeTop + bounds.height\n      const offset = threshold >= 0.5 ? threshold : threshold * vh // allow pixel vals\n\n      const iv = nodeBot - offset >= y && nodeTop + offset <= y + vh\n\n      if (iv && !visible) {\n        visible = true\n        enter && enter(...args)\n      } else if (!iv && visible) {\n        visible = false\n        exit && exit(...args)\n      }\n    })\n  }\n}\n"],"names":["node","opts","enter","exit","visible","threshold","parseFloat","getAttribute","srraf","bounds","getBoundingClientRect","nodeTop","top","y","offset","vh","iv","height","args"],"mappings":"2FAEe,SAAeA,EAAMC,yBAAO,IAClC,SAAmBC,EAAOC,OAC3BC,GAAU,EAERC,EAAYC,WAAWN,EAAKO,aAAa,mBAAqBN,EAAKI,WAAa,UAE/EG,4FAGCC,EAAST,EAAKU,wBACdC,EAAUF,EAAOG,IAAMC,EAEvBC,EAAST,GAAa,GAAMA,EAAYA,EAAYU,EAEpDC,EAHUL,EAAUF,EAAOQ,OAGZH,GAAUD,GAAKF,EAAUG,GAAUD,EAAIE,EAExDC,IAAOZ,GACTA,GAAU,EACVF,GAASA,aAAM,EAAGgB,KACRF,GAAMZ,IAChBA,GAAU,EACVD,GAAQA,aAAK,EAAGe"}