{"version":3,"file":"srraf.umd.js","sources":["../index.js"],"sourcesContent":["let frame\n\nlet x\nlet px\nlet y\nlet py\nlet vh\nlet pvh\nlet vw\nlet pvw\n\nconst fns = []\n\nfunction raf (t, force) {\n  x = window.pageXOffset\n  y = window.pageYOffset\n  vh = window.innerHeight\n  vw = window.innerWidth\n\n  if (px === undefined) px = x\n  if (py === undefined) py = y\n  if (pvw === undefined) pvw = vw\n  if (pvh === undefined) pvh = vh\n\n  if (\n    force ||\n    y !== py ||\n    x !== px ||\n    vh !== pvh ||\n    vw !== pvw\n  ) {\n    run(t)\n\n    px = x\n    py = y\n    pvh = vh\n    pvw = vw\n  }\n\n  return requestAnimationFrame(raf)\n}\n\nfunction run (t) {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i]({ x, y, px, py, vh, pvh, vw, pvw }, t)\n  }\n}\n\nexport default function srraf (fn) {\n  fns.indexOf(fn) < 0 && fns.push(fn)\n  frame = frame || raf(performance.now())\n  return {\n    update () {\n      raf(performance.now(), true)\n      return this\n    },\n    destroy () {\n      fns.splice(fns.indexOf(fn), 1)\n    }\n  }\n}\n"],"names":["let","frame","x","px","y","py","vh","pvh","vw","pvw","fns","raf","t","force","window","pageXOffset","pageYOffset","innerHeight","innerWidth","undefined","i","length","run","requestAnimationFrame","fn","indexOf","push","performance","now","update","this","destroy","splice"],"mappings":"oKAAAA,IAAIC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEEC,EAAM,GAEZ,SAASC,EAAKC,EAAGC,UACfX,EAAIY,OAAOC,YACXX,EAAIU,OAAOE,YACXV,EAAKQ,OAAOG,YACZT,EAAKM,OAAOI,gBAEDC,IAAPhB,IAAkBA,EAAKD,QAChBiB,IAAPd,IAAkBA,EAAKD,QACfe,IAARV,IAAmBA,EAAMD,QACjBW,IAARZ,IAAmBA,EAAMD,IAG3BO,GACAT,IAAMC,GACNH,IAAMC,GACNG,IAAOC,GACPC,IAAOC,MAaX,SAAcG,OACPZ,IAAIoB,EAAI,EAAGA,EAAIV,EAAIW,OAAQD,IAC9BV,EAAIU,GAAG,GAAElB,IAAGE,KAAGD,KAAIE,KAAIC,MAAIC,KAAKC,MAAIC,GAAOG,GAb3CU,CAAIV,GAEJT,EAAKD,EACLG,EAAKD,EACLG,EAAMD,EACNG,EAAMD,GAGDe,sBAAsBZ,UAShB,SAAgBa,UAC7Bd,EAAIe,QAAQD,GAAM,GAAKd,EAAIgB,KAAKF,GAChCvB,EAAQA,GAASU,EAAIgB,YAAYC,OAC1B,CACLC,yBACElB,EAAIgB,YAAYC,OAAO,GAChBE,MAETC,mBACErB,EAAIsB,OAAOtB,EAAIe,QAAQD,GAAK"}